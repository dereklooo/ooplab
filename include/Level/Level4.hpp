    //
    // Created by benson on 2025/5/25.
    //

    #ifndef LEVEL4_HPP
    #define LEVEL4_HPP
    #include "Level/Level.hpp"
    #include "Manager/TrapFireBallManager.hpp"
    class Level4 : public Level {
    public:
        Level4() : Level() {
            m_Background = std::make_shared<Map>(RESOURCE_DIR "/image/Background/Level4/level_4.png",glm::vec2(-2561,240),glm::vec2(-640,360));
            m_ManagerManager = std::make_shared<ManagerManager>(Items,Blocks,Monsters,FireBalls,m_Mario,m_renderer,m_Background);
            m_ManagerManager->SetFloor(FloorBlock, FloorBlockSize);
            m_ManagerManager->SetBlock(AirBlock,BlockType::Air);
            m_ManagerManager->SetBlock(LuckyBLock,BlockType::Lucky);
            m_ManagerManager->SetBlock(Bridge,BlockType::Bridge);
            m_ManagerManager->SetElevator({136.5,-6.5},48*3,Way::Left);
            m_ManagerManager->SetItem(Item_Coin, ItemType::Item_Coin);
            m_ManagerManager->SetItem(Item_Mushroom, ItemType::Item_Mushroom);
            m_ManagerManager->SetItem(Item_Axe,ItemType::Item_Axe);
            m_ManagerManager->SetFireball(TrapFireBallCenter,m_renderer);
            m_Bgm=std::make_shared<Util::BGM>(RESOURCE_DIR "/sound/04. Castle Theme.mp3");

            std::vector<std::shared_ptr<Monster>> _temp;
            _temp.push_back(std::make_shared<Mushroom>(glm::vec2(0,-22000),Left));
            m_ManagerManager->AddMonster(_temp,m_renderer);

            m_Bgm->Play(-1);
            m_Bgm->SetVolume(40);
        }
        void Update() override{
            if(Util::Input::IsKeyPressed(Util::Keycode::SPACE)) {
                //std::cout<<m_Background->GetPosition().x<<std::endl;
            }
            if(m_Mario->GetPosition().y <= -400 && m_Mario->GetAnimating() == false && this->GameOver == false) {
                this->GameOver = true;
                GameOvertime=Util::Time::GetElapsedTimeMs();
                m_Mario->SetCanMove(false);
                m_Bgm->LoadMedia(RESOURCE_DIR "/sound/08. Lost a Life.mp3");
                m_Bgm->SetVolume(40);
                m_Bgm->Play(-1);
                return;
            }
            if(m_Background->GetPosition().x <= -5500 && Condition_num == 1) {
                std::vector<std::shared_ptr<Monster>> _temp;
                auto T = std::make_shared<Kooper>(glm::vec2(1100,0),m_Mario);
                _temp.push_back(T);
                m_ManagerManager->AddMonster(_temp,m_renderer);
                m_renderer->AddChild(T->GetFireBall());
                Condition_num += 1;
            }
        }
    private:
        std::vector<glm::vec2> FloorBlock = {{6.5,-12.5},{20.5,-12.5}};
        std::vector<glm::vec2> FloorBlockSize = {{13.0f,5.0f},{11.0f,5.0f}};
        std::vector<glm::vec2> AirBlock={{23.5,-2.5} , {24.5,-2.5} , {25.5,-2.5} , {26.5,-2.5} , {27.5,-2.5} , {28.5,-2.5} , {29.5,-2.5} , {30.5,-2.5} , {31.5,-2.5} , {32.5,-2.5} , {33.5,-2.5} , {34.5,-2.5} , {35.5,-2.5} , {36.5,-2.5} , {37.5,-2.5} , {71.5,-2.5} , {72.5,-2.5} , {73.5,-2.5} , {74.5,-2.5} , {75.5,-2.5} , {76.5,-2.5} , {77.5,-2.5} , {78.5,-2.5} , {79.5,-2.5} , {80.5,-2.5} , {81.5,-2.5} , {82.5,-2.5} , {83.5,-2.5} , {84.5,-2.5} , {85.5,-2.5} , {86.5,-2.5} , {87.5,-2.5} , {88.5,-2.5} , {89.5,-2.5} , {90.5,-2.5} , {91.5,-2.5} , {92.5,-2.5} , {93.5,-2.5} , {94.5,-2.5} , {95.5,-2.5} , {96.5,-2.5} , {97.5,-2.5} , {103.5,-2.5} , {104.5,-2.5} , {105.5,-2.5} , {106.5,-2.5} , {107.5,-2.5} , {108.5,-2.5} , {109.5,-2.5} , {110.5,-2.5} , {111.5,-2.5} , {112.5,-2.5} , {113.5,-2.5} , {114.5,-2.5} , {115.5,-2.5} , {116.5,-2.5} , {117.5,-2.5} , {118.5,-2.5} , {119.5,-2.5} , {120.5,-2.5} , {121.5,-2.5} , {122.5,-2.5} , {128.5,-2.5} , {129.5,-2.5} , {130.5,-2.5} , {131.5,-2.5} , {132.5,-2.5} , {133.5,-2.5} , {134.5,-2.5} , {135.5,-2.5} , {136.5,-2.5} , {137.5,-2.5} , {138.5,-2.5} , {139.5,-2.5} , {140.5,-2.5} , {141.5,-2.5} , {142.5,-2.5} , {143.5,-2.5} , {144.5,-2.5} , {145.5,-2.5} , {146.5,-2.5} , {147.5,-2.5} , {148.5,-2.5} , {149.5,-2.5} , {150.5,-2.5} , {151.5,-2.5} , {152.5,-2.5} , {153.5,-2.5} , {154.5,-2.5} , {155.5,-2.5} , {156.5,-2.5} , {157.5,-2.5} , {158.5,-2.5} , {159.5,-2.5} ,
        {23.5,-3.5} , {37.5,-3.5} , {71.5,-3.5} , {80.5,-3.5} , {88.5,-3.5} , {97.5,-3.5} , {103.5,-3.5} , {123.5,-3.5} , {127.5,-3.5} , {142.5,-3.5} , {143.5,-3.5} , {159.5,-3.5} ,
        {0.5,-4.5} , {1.5,-4.5} , {2.5,-4.5} , {3.5,-4.5} , {4.5,-4.5} , {5.5,-4.5} , {6.5,-4.5} , {7.5,-4.5} , {8.5,-4.5} , {9.5,-4.5} , {10.5,-4.5} , {11.5,-4.5} , {12.5,-4.5} , {13.5,-4.5} , {14.5,-4.5} , {15.5,-4.5} , {16.5,-4.5} , {17.5,-4.5} , {18.5,-4.5} , {19.5,-4.5} , {20.5,-4.5} , {21.5,-4.5} , {22.5,-4.5} , {23.5,-4.5} , {37.5,-4.5} , {71.5,-4.5} , {80.5,-4.5} , {88.5,-4.5} , {97.5,-4.5} , {98.5,-4.5} , {99.5,-4.5} , {100.5,-4.5} , {101.5,-4.5} , {102.5,-4.5} , {103.5,-4.5} , {123.5,-4.5} , {124.5,-4.5} , {125.5,-4.5} , {126.5,-4.5} , {127.5,-4.5} , {142.5,-4.5} , {143.5,-4.5} , {159.5,-4.5} ,

        {23.5,-5.5} , {37.5,-5.5} , {38.5,-5.5} , {39.5,-5.5} , {40.5,-5.5} , {41.5,-5.5} , {42.5,-5.5} , {43.5,-5.5} , {44.5,-5.5} , {45.5,-5.5} , {46.5,-5.5} , {47.5,-5.5} , {48.5,-5.5} , {49.5,-5.5} , {50.5,-5.5} , {51.5,-5.5} , {52.5,-5.5} , {53.5,-5.5} , {54.5,-5.5} , {55.5,-5.5} , {56.5,-5.5} , {57.5,-5.5} , {58.5,-5.5} , {59.5,-5.5} , {60.5,-5.5} , {61.5,-5.5} , {62.5,-5.5} , {63.5,-5.5} , {64.5,-5.5} , {65.5,-5.5} , {66.5,-5.5} , {67.5,-5.5} , {68.5,-5.5} , {69.5,-5.5} , {70.5,-5.5} , {71.5,-5.5} , {142.5,-5.5} , {143.5,-5.5} , {159.5,-5.5} ,
        {23.5,-6.5} , {37.5,-6.5} , {49.5,-6.5} , {60.5,-6.5} , {67.5,-6.5} , {159.5,-6.5} ,
        {159.5,-7.5} ,
        {159.5,-8.5} ,
        {35.5,-9.5} , {36.5,-9.5} , {37.5,-9.5} , {38.5,-9.5} , {39.5,-9.5} , {40.5,-9.5} , {41.5,-9.5} , {42.5,-9.5} , {43.5,-9.5} , {44.5,-9.5} , {45.5,-9.5} , {46.5,-9.5} , {47.5,-9.5} , {48.5,-9.5} , {49.5,-9.5} , {50.5,-9.5} , {51.5,-9.5} , {52.5,-9.5} , {53.5,-9.5} , {54.5,-9.5} , {55.5,-9.5} , {56.5,-9.5} , {57.5,-9.5} , {58.5,-9.5} , {59.5,-9.5} , {60.5,-9.5} , {61.5,-9.5} , {62.5,-9.5} , {63.5,-9.5} , {64.5,-9.5} , {65.5,-9.5} , {66.5,-9.5} , {67.5,-9.5} , {68.5,-9.5} , {69.5,-9.5} , {70.5,-9.5} , {71.5,-9.5} , {76.5,-9.5} , {84.5,-9.5} , {92.5,-9.5} , {141.5,-9.5} , {142.5,-9.5} , {143.5,-9.5} , {159.5,-9.5} ,
        {29.5,-10.5} , {30.5,-10.5} , {31.5,-10.5} , {35.5,-10.5} , {71.5,-10.5} , {72.5,-10.5} , {73.5,-10.5} , {74.5,-10.5} , {75.5,-10.5} , {77.5,-10.5} , {78.5,-10.5} , {79.5,-10.5} , {80.5,-10.5} , {81.5,-10.5} , {82.5,-10.5} , {83.5,-10.5} , {85.5,-10.5} , {86.5,-10.5} , {87.5,-10.5} , {88.5,-10.5} , {89.5,-10.5} , {90.5,-10.5} , {91.5,-10.5} , {93.5,-10.5} , {94.5,-10.5} , {95.5,-10.5} , {96.5,-10.5} , {97.5,-10.5} , {98.5,-10.5} , {99.5,-10.5} , {100.5,-10.5} , {101.5,-10.5} , {102.5,-10.5} , {103.5,-10.5} , {116.5,-10.5} , {117.5,-10.5} , {118.5,-10.5} , {119.5,-10.5} , {123.5,-10.5} , {124.5,-10.5} , {125.5,-10.5} , {126.5,-10.5} , {127.5,-10.5} , {141.5,-10.5} , {143.5,-10.5} , {159.5,-10.5} ,
        {29.5,-11.5} , {31.5,-11.5} , {35.5,-11.5} , {103.5,-11.5} , {116.5,-11.5} , {119.5,-11.5} , {123.5,-11.5} , {127.5,-11.5} , {141.5,-11.5} , {143.5,-11.5} , {159.5,-11.5} ,
        {29.5,-12.5} , {31.5,-12.5} , {35.5,-12.5} , {103.5,-12.5} , {116.5,-12.5} , {119.5,-12.5} , {123.5,-12.5} , {127.5,-12.5} , {141.5,-12.5} , {143.5,-12.5} , {159.5,-12.5} ,
        {29.5,-13.5} , {31.5,-13.5} , {35.5,-13.5} , {103.5,-13.5} , {104.5,-13.5} , {105.5,-13.5} , {106.5,-13.5} , {107.5,-13.5} , {108.5,-13.5} , {109.5,-13.5} , {110.5,-13.5} , {111.5,-13.5} , {112.5,-13.5} , {113.5,-13.5} , {114.5,-13.5} , {115.5,-13.5} , {116.5,-13.5} , {119.5,-13.5} , {120.5,-13.5} , {121.5,-13.5} , {122.5,-13.5} , {123.5,-13.5} , {127.5,-13.5} , {141.5,-13.5} , {143.5,-13.5} , {144.5,-13.5} , {145.5,-13.5} , {146.5,-13.5} , {147.5,-13.5} , {148.5,-13.5} , {149.5,-13.5} , {150.5,-13.5} , {151.5,-13.5} , {152.5,-13.5} , {153.5,-13.5} , {154.5,-13.5} , {155.5,-13.5} , {156.5,-13.5} , {157.5,-13.5} , {158.5,-13.5} , {159.5,-13.5} ,
        {29.5,-14.5} , {31.5,-14.5} , {35.5,-14.5} , {127.5,-14.5} , {141.5,-14.5}};
        std::vector<glm::vec2> Bridge = {{128.5,-10.5} , {129.5,-10.5} , {130.5,-10.5} , {131.5,-10.5} , {132.5,-10.5} , {133.5,-10.5} , {134.5,-10.5} , {135.5,-10.5} , {136.5,-10.5} , {137.5,-10.5} , {138.5,-10.5} , {139.5,-10.5} , {140.5,-10.5}};
        std::vector<glm::vec2> TrapFireBallCenter = {{88.5,-4.5} ,
        {49.5,-6.5} , {60.5,-6.5} , {67.5,-6.5} ,
        {76.5,-9.5} , {84.5,-9.5} ,
        {30.5,-10.5}};
        std::vector<glm::vec2> LuckyBLock = {{107.5,-5.5} , {110.5,-5.5},{113.5,-5.5},{30.5,-6.5} ,{106.5,-9.5} , {109.5,-9.5} , {112.5,-9.5}};
        std::vector<glm::vec2> Item_Coin = {{107.5,-5.5} , {110.5,-5.5} , {113.5,-5.5} , {106.5,-9.5} , {109.5,-9.5} , {112.5,-9.5}};
        std::vector<glm::vec2> Item_Axe = {{141.5,-8.5}};
        std::vector<glm::vec2> Item_Mushroom ={{30.5,-6.5}};
    };

    #endif //LEVEL4_HPP
